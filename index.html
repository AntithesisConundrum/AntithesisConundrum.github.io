<!DOCTYPE html>
<html>	
	<head>
		<title>
			Rice GPA Calculator
		</title>
		<link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>
		<script src="jquery.js"></script>
		<style>
			body {
			font-size: 20px;
			background: #F1E4BA;
			font-family: 'Lora', Georgia, 'Times New Roman', Times, serif;
			color: #5C2600;
			}
			header {
				text-align: center;
			}
			img {
				display: inline-block;
			}
			h1 {
				display: inline-block;
				text-align: center;
				margin: 0px 140px 0px 140px;
				font-size: 60px;
				position: relative;
				top: -40px;
			}
			h3 {
				text-align: center;
				position: relative;
				top: 20px;
			}
			button {
			margin: 40px;
			}
			input {
				font-size: 24px;
				border: 4px solid black;
				margin: 7px;
			}
			table {
				text-align: center;
				border: 3px solid #331700;
				width: 95%;
				position: absolute;
				left: 2.5%;
				border-collapse: collapse;
			}
			td {
				border: 3px solid #331700;
			}

			.button {
				position: relative;
				width: 15%;
				top: 35px;
				margin: 40px;
				left: 260px;
				text-align: center;
				background-color: #CCBDB1;
			}
		</style>
	</head>
	
	<body>
		<header>
		<img src="http://grfx.cstv.com/schools/rice/graphics/rice-15-mast-r-logo-1280.png"> <h1>Rice GPA Calculator</h1> <img src="http://grfx.cstv.com/schools/rice/graphics/rice-15-mast-r-logo-1280.png">
		</header>
		<table>
			<tr>
				<td id="classname">Class Name</td>
				<td id="numhours">Number of Hours</td>
				<td id="letter">Letter Grade</td>
			</tr>
			<tr>
				<span class="inputs">
				<td><input type="text" class="classes"></td>
				<td><input type="text" class="hours"></td>
				<td><input type="text" class="grade"></td>
				</span>
			</tr>
		</table>
		<br>
		<span class = "next"><input type="button" class="button" value="Next" /></span>
		<span class = "done"><input type="button" class="button" value="Done" /></span>
		<span class = "reset"><input type="button" class="button" value="Reset" /></span>
		<h3 class="show1"></h3>
		<h3 class="show2"></h3>
		
		
		
		<script>
		var classes = [];
		var hours = [];
		var grades = [];
		
		var resetAnswers = function() {
			classes = []
			hours = []
			grades = []
		}
		
		$('input:text').focus(
    		function(){
        		$(this).val('');
    	});
		
		// A function that will record the inputted values
		var recordAnswers = function() {
			newClass = $('.classes').val().toUpperCase()
			newHour = $('.hours').val()
			newGrade = $('.grade').val().toUpperCase()
			classes.push(newClass);
			hours.push(newHour);
			grades.push(newGrade);
		}
		
		var displayClasses = function() {
			var num = classes.length
			var index = 0
			var displayArray = []
			while(index < num) {
				currentClass = classes[index]
				currentHours = hours[index]
				currentGrade = grades[index]
				currentEntry = currentClass + " " + currentHours + " " + currentGrade
				if(index==0){
					displayArray.push(currentEntry)
				}
				else {
					displayArray.push(", " + currentEntry)
				}
				index++
			}
		$('.show1').html(displayArray)
		}
		
		$('.reset').click(function() {
			resetAnswers();
			displayClasses();
    	});
		
		$('.next').click(function() {
			recordAnswers();
			displayClasses();
    	});
		$(document).keypress(function(e) {
    	if(e.which == 13) {
        	recordAnswers();
			displayClasses();
    		}
		});
		
		var showResults = function() {
			//alert("Function")
			var numClasses = classes.length
			if(numClasses == 0) {
				return 'You have to input a class!'
			}
			var index  = 0
			var totalHours = 0
			var totalGrade = 0
			//alert("Beginning While")
			while(index < numClasses){
				//alert("While")
				var currentHours = Number(hours[index])
				if(isNaN(currentHours)) {
					return 'One of your "Hours" fields was entered improperly. Please try again.'
				}
				totalHours += currentHours
				var currentGrade = grades[index];
				if(currentGrade == "A+") {
					totalGrade += 4.333*currentHours
				}
				else if(currentGrade == "A") {
					totalGrade += 4*currentHours
				}
				else if(currentGrade == "A-") {
					totalGrade += 3.667*currentHours
				}
				else if(currentGrade == "B+") {
					totalGrade += 3.333*currentHours
				}
				else if(currentGrade == "B") {
					totalGrade += 3*currentHours
				}
				else if(currentGrade == "B-") {
					totalGrade += 2.667*currentHours
				}
				else if(currentGrade == "C+") {
					totalGrade += 2.333*currentHours
				}
				else if(currentGrade == "C") {
					totalGrade += 2*currentHours
				}
				else if(currentGrade == "C-") {
					totalGrade += 1.666*currentHours
				}
				else if(currentGrade == "D+") {
					totalGrade += 1.333*currentHours
				}
				else if(currentGrade == "D") {
					totalGrade += 1*currentHours
				}
				else if(currentGrade == "D-") {
					totalGrade += 0.667*currentHours
				}
				else if(currentGrade == "F") {
					totalGrade += 0
				}
				else {
					return 'One of your "Grade" fields was entered improperly. Please try again.'
				}
			index++
			}
		//alert("GPA calc")
		var GPA = totalGrade / totalHours
		//alert("GPA good")
		var roundedGPA = Math.round(GPA*1000) / 1000
		//alert("round good")
		return("Your GPA is: " + roundedGPA)
		}
		
		$('.done').click(function() {
			//alert("Done")
			var result = String(showResults());
			$('.show2').html(result);
		});
		</script>
	</body>
</html>
